---
const navLinks = [
  { title: "Home", href: "/" },
  { title: "About", href: "/about" },
  { title: "Services", href: "/services" },
  { title: "Team", href: "/team" },
  { title: "Contact", href: "/contact" },
];

const currentPath = Astro.url.pathname;
import logo from "../assets/logo.png";
---

<!-- Fonts -->
<link
  href="https://fonts.googleapis.com/css2?family=Asap+Condensed:wght@700&family=Roboto+Condensed:wght@400;700&display=swap"
  rel="stylesheet"
/>
<style>
  html,
  body {
    margin: 0;
    padding: 0;
    background-color: #ffffff;
  }
</style>

<header class="bg-white dark:bg-gray-900 relative overflow-hidden transition-colors duration-500">
  <!-- MOBILE HEADER -->
  <div class="lg:hidden w-full shadow-sm p-4 flex items-center justify-between transition-colors duration-500">
    <div class="flex items-center">
      <svg width="35" height="38" pb-5 viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg" aria-hidden>
        <rect x="0" y="0" width="18" height="18" rx="2" fill="#3ad24d"></rect>
        <rect x="22" y="0" width="18" height="18" rx="2" fill="#00a6a0"></rect>
        <rect x="22" y="22" width="18" height="18" rx="2" fill="#19b7b3"></rect>
      </svg>
      <div class="flex flex-col leading-tight">
        <h1 class="text-2xl font-bold text-[#0b3b46] dark:text-white" style="font-family:'Asap Condensed', sans-serif;">TRIASOFT SYSTEMS</h1>
        <span class="text-xs uppercase tracking-widest text-black dark:text-gray-300" style="font-family:'Roboto Condensed', sans-serif;">ENGINEERING DIGITAL EDGE</span>
      </div>
    </div>

    <div class="flex items-center gap-2">

      <!-- Hamburger Menu -->
        <button id="menu-toggle" class="p-2 rounded-md text-[#00697c] dark:text-teal-300 focus:outline-none" aria-label="Toggle menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
       <button data-theme-toggle class="p-2 rounded-md border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Toggle Dark Mode">
  <!-- Moon shown when NOT dark -->
  <svg class="h-6 w-6 dark:hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" />
  </svg>

  <!-- Sun shown when dark -->
  <svg class="h-6 w-6 hidden dark:inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M12 3v1m0 16v1m8.66-9H21m-17 0H3m15.364 6.364l.707.707M6.343 6.343l.707.707M17.657 6.343l-.707.707M6.343 17.657l-.707-.707M12 5a7 7 0 100 14 7 7 0 000-14z" />
  </svg>
</button>
     

      <!-- Theme Toggle -->
      <!-- <button id="theme-toggle" class="p-2 rounded-md border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Toggle Dark Mode">
        <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" />
        </svg>
        <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m8.66-9H21m-17 0H3m15.364 6.364l.707.707M6.343 6.343l.707.707M17.657 6.343l-.707.707M6.343 17.657l-.707-.707M12 5a7 7 0 100 14 7 7 0 000-14z" />
        </svg>
      </button> -->

    </div>
  </div>

  <!-- MOBILE MENU LINKS -->
  <div id="mobile-menu" class="hidden lg:hidden bg-gradient-to-r from-teal-400 via-[#20b2aa] to-teal-400 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 shadow-md px-6 py-4 rounded-b-2xl flex flex-col space-y-2 transition-colors duration-500">
    {navLinks.map((link) => {
      const cleanPath = currentPath.replace(/\/+$/, "");
      return (
        <a
          href={link.href}
          class:list={[
            "relative text-[27px] font-semibold transition-all duration-300 px-3 py-1 rounded-md",
            currentPath === link.href
              ? "text-[#00697c] dark:text-teal-300"
              : link.title === "Contact"
              ? "bg-[#00697c] text-white dark:bg-teal-600 dark:text-gray-100 rounded-full px-2 py-1.5 hover:bg-white hover:text-[#00697c] dark:hover:bg-gray-700 dark:hover:text-teal-300 border border-transparent"
              : "text-white hover:text-[#00697c] dark:text-gray-300 dark:hover:text-teal-300"
          ]}
        >
          {link.title}
        </a>
      );
    })}
  </div>

  <!-- DESKTOP HEADER -->
  <div class="hidden lg:flex w-full items-stretch">
    <div class="flex justify-end w-1/2">
      <div class="flex justify-center gap-10 p-4 pr-10 bg-gradient-to-r from-teal-400 via-[#20b2aa] to-teal-400 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 rounded-br-[29px] shadow-lg items-center w-[90%] sm:w-[95%] lg:w-[100%] transition-colors duration-500">
        <nav class="flex flex-wrap gap-6 xl:gap-10 items-center" style="font-family:'Roboto Condensed', sans-serif;">
          {navLinks.map((link) => (
            <a
              href={link.href}
              class:list={[
                "relative text-[27px] font-semibold transition-all duration-300 px-3 py-1 rounded-md",
                currentPath === link.href
                  ? "text-[#00697c] dark:text-teal-300"
                  : link.title === "Contact"
                  ? "bg-[#00697c] text-white dark:bg-teal-600 dark:text-gray-100 rounded-full px-4 py-2 hover:bg-white hover:text-[#00697c] dark:hover:bg-gray-700 dark:hover:text-teal-300 border border-transparent"
                  : "text-white hover:text-[#00697c] dark:text-gray-300 dark:hover:text-teal-300"
              ]}
            >
              {link.title}
            </a>
          ))}
        </nav>
      </div>
    </div>

    <div class="flex justify-start w-1/2">
      <div class="flex items-center justify-end pr-5 gap-6 py-3 h-[56px] w-[90%] sm:w-[95%] lg:w-[100%] bg-gradient-to-l from-[#00697c] via-[#00697c] to-[#00697c] dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 shadow-lg mb-2 transition-colors duration-500">
        <!-- Social Icons -->
        <a href="#" target="_blank" aria-label="Facebook" class="p-2 rounded-full hover:bg-white/10 transition-colors">
          <svg class="w-9 h-9 text-white dark:text-gray-300 hover:text-teal-400 transition-colors duration-300" fill="currentColor" viewBox="0 0 24 24">
            <path d="M22 12a10 10 0 1 0-11.6 9.9v-7h-2v-3h2v-2.3c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2V12h2.2l-.3 3h-1.9v7A10 10 0 0 0 22 12Z"></path>
          </svg>
        </a>
        <a href="#" target="_blank" aria-label="LinkedIn" class="p-2 rounded-full hover:bg-white/10 transition-colors">
          <svg class="w-9 h-9 text-white dark:text-gray-300 hover:text-teal-400 transition-colors duration-300" fill="currentColor" viewBox="0 0 24 24">
            <path d="M4.98 3.5A2.5 2.5 0 1 1 5 8.5 2.5 2.5 0 0 1 4.98 3.5ZM3 9h4v12H3zM9 9h3.6v1.7h.1a4 4 0 0 1 3.6-2c3.8 0 4.5 2.5 4.5 5.8V21h-4v-6c0-1.4 0-3.3-2-3.3s-2.2 1.5-2.2 3.2V21H9z"></path>
          </svg>
        </a>
        <a href="#" target="_blank" aria-label="YouTube" class="p-2 rounded-full hover:bg-white/10 transition-colors">
          <svg class="w-9 h-9 text-white dark:text-gray-300 hover:text-teal-400 transition-colors duration-300" fill="currentColor" viewBox="0 0 24 24">
            <path d="M19.6 3.2H4.4A2.4 2.4 0 0 0 2 5.6v12.8A2.4 2.4 0 0 0 4.4 21h15.2a2.4 2.4 0 0 0 2.4-2.4V5.6a2.4 2.4 0 0 0-2.4-2.4ZM10 16.5v-9l6 4.5-6 4.5Z"></path>
          </svg>
        </a>
        <a href="#" target="_blank" aria-label="Twitter" class="p-2 rounded-full hover:bg-white/10 transition-colors">
          <svg class="w-9 h-9 text-white dark:text-gray-300 hover:text-teal-400 transition-colors duration-300" fill="currentColor" viewBox="0 0 24 24">
            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.54A4.48 4.48 0 0 0 22.4.36a9.1 9.1 0 0 1-2.88 1.1A4.52 4.52 0 0 0 16 0c-2.5 0-4.5 2.2-4.5 4.9 0 .4 0 .8.1 1.1A12.8 12.8 0 0 1 1.7.9a5.1 5.1 0 0 0-.6 2.5A5 5 0 0 0 3 7.2a4.2 4.2 0 0 1-2-.6v.1c0 2.3 1.6 4.2 3.7 4.7a4.4 4.4 0 0 1-2 .1 4.5 4.5 0 0 0 4.3 3.4A9 9 0 0 1 0 19.6a12.7 12.7 0 0 0 6.9 2A12.7 12.7 0 0 0 19.9 9v-.6A9.3 9.3 0 0 0 23 3Z"></path>
          </svg>
        </a>

        <!-- Theme Toggle for Desktop -->
        <!-- <button id="theme-toggle" class="p-2 rounded-md border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Toggle Dark Mode">
          <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" />
          </svg>
          <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m8.66-9H21m-17 0H3m15.364 6.364l.707.707M6.343 6.343l.707.707M17.657 6.343l-.707.707M6.343 17.657l-.707-.707M12 5a7 7 0 100 14 7 7 0 000-14z" />
          </svg>
        </button> -->
        <button data-theme-toggle class="p-2 rounded-md border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" aria-label="Toggle Dark Mode">
  <!-- Moon shown when NOT dark -->
  <svg class="h-6 w-6 dark:hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" />
  </svg>

  <!-- Sun shown when dark -->
  <svg class="h-6 w-6 hidden dark:inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M12 3v1m0 16v1m8.66-9H21m-17 0H3m15.364 6.364l.707.707M6.343 6.343l.707.707M17.657 6.343l-.707.707M6.343 17.657l-.707-.707M12 5a7 7 0 100 14 7 7 0 000-14z" />
  </svg>
</button>
      </div>
    </div>
  </div>

  <!-- Center Logo Block -->
  <div class="max-w-screen-xl mx-auto py-10 hidden lg:flex items-center justify-center">
    <div class="flex items-center">
       <svg width="66" height="70" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
  <rect x="0" y="0" width="18" height="18" rx="2" fill="#3ad24d"></rect>
  <rect x="22" y="0" width="18" height="18" rx="2" fill="#00a6a0"></rect>
  <rect x="22" y="22" width="18" height="18" rx="2" fill="#19b7b3"></rect>
</svg>

      <!-- <img src={logo.src} alt="Logo" class="w-14 h-15 mr-2.5 mb-4" /> -->
      <div class="flex flex-col items-end leading-tight text-right">
        <h1 class="text-7xl font-bold text-[#0b3b46] dark:text-white" style="font-family:'Asap Condensed', sans-serif;">TRIASOFT SYSTEMS</h1>
        <span class="text-sm text-[20px] text-black dark:text-gray-300 tracking-widest uppercase mt-0.5" style="font-family:'Roboto Condensed', sans-serif;">ENGINEERING DIGITAL EDGE</span>
      </div>
    </div>
  </div>

  <!-- Mobile Menu Script -->
  <script is:inline>
    (function () {
      const MOBILE_MENU_ID = "mobile-menu";
      const TOGGLE_ID = "menu-toggle";

      function toggleMenu() {
        const mobile = document.getElementById(MOBILE_MENU_ID);
        if (!mobile) return;
        mobile.classList.toggle("hidden");
      }

      function closeMenu() {
        const mobile = document.getElementById(MOBILE_MENU_ID);
        if (!mobile) return;
        if (!mobile.classList.contains("hidden")) mobile.classList.add("hidden");
      }

      document.addEventListener("click", (ev) => {
        const btn = ev.target.closest && ev.target.closest(`#${TOGGLE_ID}`);
        if (btn) {
          ev.preventDefault();
          toggleMenu();
          return;
        }

        const link = ev.target.closest && ev.target.closest(`#${MOBILE_MENU_ID} a`);
        if (link) setTimeout(closeMenu, 10);
      }, true);

      document.addEventListener("keydown", (ev) => {
        if (ev.key === "Escape") closeMenu();
      });

      document.addEventListener("DOMContentLoaded", () => {
        const mobile = document.getElementById(MOBILE_MENU_ID);
        if (mobile && !mobile.classList.contains("hidden")) mobile.classList.add("hidden");
      });
    })();
  </script>

  <!-- Theme Toggle Script -->
  <script is:inline>
    const themeBtn = document.querySelectorAll('#theme-toggle');
    const html = document.documentElement;

    function updateIcons() {
      themeBtn.forEach(btn => {
        const moon = btn.querySelector('#moon-icon');
        const sun = btn.querySelector('#sun-icon');
        const dark = html.classList.contains('dark');
        moon.classList.toggle('hidden', dark);
        sun.classList.toggle('hidden', !dark);
      });
    }

    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      html.classList.add('dark');
    } else {
      html.classList.remove('dark');
    }
    updateIcons();

    themeBtn.forEach(btn => btn.addEventListener('click', () => {
      html.classList.toggle('dark');
      localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
      updateIcons();
    }));
  </script>
</header>
